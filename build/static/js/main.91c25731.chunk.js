(this["webpackJsonpreact-hotel-reservation-system"]=this["webpackJsonpreact-hotel-reservation-system"]||[]).push([[0],{10:function(e,t,a){e.exports={form:"Form_form__3wvE7","form__wide-row":"Form_form__wide-row__1CPqd","form__have-two":"Form_form__have-two__1Ld62",form__label:"Form_form__label__1UP6R","form__checkboxes-wrapper":"Form_form__checkboxes-wrapper__1-FCH",form__section__title:"Form_form__section__title__3qG9-",form__info:"Form_form__info__3wOBr","form__info__invalid-text":"Form_form__info__invalid-text__WFiED","form__info__warning-text":"Form_form__info__warning-text__2GWnc",form__info__content:"Form_form__info__content__2LQ6O",form__error:"Form_form__error__11Ne4",form__actions:"Form_form__actions__31BiM"}},17:function(e,t,a){e.exports={"reservation-details__totals":"ReservationTotals_reservation-details__totals__3NU2E","reservation-details__totals__item":"ReservationTotals_reservation-details__totals__item__1uOM3","reservation-details__totals__title":"ReservationTotals_reservation-details__totals__title__3mHiS","reservation-details__totals__value":"ReservationTotals_reservation-details__totals__value__3nmav","reservation-details__totals__total":"ReservationTotals_reservation-details__totals__total__Chl8o"}},182:function(e,t,a){},183:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),i=a(30),r=a.n(i),c=a(20),o=a(7),l=a(46),d=a(47),u=a(90),_=a(88),p=a(0),v=function(e){return function(t){Object(u.a)(s,t);var a=Object(_.a)(s);function s(e){var t;return Object(l.a)(this,s),(t=a.call(this,e)).state={error:!1},t}return Object(d.a)(s,[{key:"componentDidCatch",value:function(e,t){console.error("\ud83d\udd25 something went wrong.",e,t)}},{key:"render",value:function(){return this.state.error?Object(p.jsx)("div",{className:"error-handler",children:Object(p.jsx)("h1",{children:"Something went wrong."})}):Object(p.jsx)(e,Object(o.a)({},this.props))}}],[{key:"getDerivedStateFromError",value:function(e){return{error:!0}}}]),s}(s.Component)},h=a(43),m=a(41),b=a.n(m),j=a(50),x=(a(102),a(103),a(13)),f=a.n(x),g=new(function(){function e(){Object(l.a)(this,e),this.logs=void 0,this.logs=[]}return Object(d.a)(e,[{key:"debug",value:function(){}},{key:"silly",value:function(){var e;for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];var n=[].concat(a),i=n[0],r=i;n[0]="%c"+r,n.splice(1,0,"color: #1c6ef7; font-weight: bold;"),this.logs.push({type:"DEBUG",date:new Date(Date.now()).toISOString(),log:n}),(e=console).log.apply(e,Object(h.a)(n))}},{key:"error",value:function(){for(var e,t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];var n=[].concat(a);n[0]="%c"+n[0],n.splice(1,0,"color: red; font-weight: bold;"),this.logs.push({type:"ERROR",date:new Date(Date.now()).toISOString(),log:n}),(e=console).error.apply(e,Object(h.a)(n))}}]),e}()),O=function(e,t){var a=!0;if("undefined"===typeof t||!t.length)return a;for(var s=t.length,n=0;n<s;n+=1){var i=t[n],r=i[0],c=i.slice(1);if(r&&"function"===typeof r){var o=["isEmpty"].includes(r.name),l=r.apply(void 0,[e].concat(Object(h.a)(c)));if(!(a=a&&!o?l:!l))break}}return a},y=function(e){var t=!0,a=e.split(" "),s=a.length;if(a.length<2)return!1;for(var n=0;n<s;n+=1)t=t&&f.a.isAlpha(a[n],"en-US");return t},w=function(){for(var e=(new Date).getFullYear()+10,t=[],a=(new Date).getFullYear();a<=e;a+=1)t.push(a);return t},k=function(e){var t=1,a=[];e===(new Date).getFullYear().toString()&&(t=(new Date).getMonth()+1);for(var s=t;s<=12;s+=1)a.push(s.toString().padStart(2,"0"));return a},N=function(e){try{var t=window.localStorage.getItem(e);return t?JSON.parse(t):""}catch(a){console.log("\ud83d\udd25",a)}},C=function(){localStorage.removeItem("step-0"),localStorage.removeItem("step-1"),localStorage.removeItem("step-2"),localStorage.removeItem("steps"),localStorage.removeItem("reservationId")},T=function(e,t){return"string"===typeof e&&"string"===typeof t?(new Date(t).getTime()-new Date(e).getTime())/864e5:0},S=function(e,t,a){return"undefined"===typeof t||"undefined"===typeof a?e:a*t*e},I=function(e,t){var a,s=e.hotelId;if(t&&s&&(a=t.find((function(e){return e.id===s}))),a){var n=e.roomType?e.roomType.split("-")[1]:"0",i=a.room_type.findIndex((function(e){return e.id.toString()===n.toString()})),r=e.viewType?e.viewType.split("-")[1]:"0",c=a.room_scenic.findIndex((function(e){return e.id.toString()===r.toString()}));return{type:a.room_type[i],view:a.room_scenic[c]}}},R=function(e,t){var a=I(e,t),s=0,n=0,i=0;return(null===a||void 0===a?void 0:a.type)&&(null===a||void 0===a?void 0:a.view)&&(s=a.type.price,n=a.view.price_rate,e.days&&e.adults&&(i=S(s,+e.days,+e.adults))),{room:s,total:i,ratio:n,final:n/100*i+i}},V=function(e,t,a){return b.a.isMatch(e,b.a.pick(t,a))},E=[{mask:"0000 0000 0000 0000",regex:"^(?:6011|65\\d{0,2}|64[4-9]\\d?)\\d{0,12}",cardType:"discover"},{mask:"0000 000000 0000",regex:"^3(?:0([0-5]|9)|[689]\\d?)\\d{0,11}",cardType:"diners"},{mask:"0000 0000 0000 0000",regex:"^(5[1-5]\\d{0,2}|22[2-9]\\d{0,1}|2[3-7]\\d{0,2})\\d{0,12}",cardType:"mastercard"},{mask:"0000-0000-0000-0000",regex:"^(5019|4175|4571)\\d{0,12}",cardType:"dankort"},{mask:"0000-0000-0000-0000",regex:"^63[7-9]\\d{0,13}",cardType:"instapayment"},{mask:"0000 000000 00000",regex:"^(?:2131|1800)\\d{0,11}",cardType:"jcb15"},{mask:"0000 0000 0000 0000",regex:"^(?:35\\d{0,2})\\d{0,12}",cardType:"jcb"},{mask:"0000 0000 0000 0000",regex:"^(?:5[0678]\\d{0,2}|6304|67\\d{0,2})\\d{0,12}",cardType:"maestro"},{mask:"0000-0000-0000-0000",regex:"^220[0-4]\\d{0,12}",cardType:"mir"},{mask:"0000 0000 0000 0000",regex:"^4\\d{0,15}",cardType:"visa"},{mask:"0000 0000 0000 0000",regex:"^62\\d{0,14}",cardType:"unionpay"},{mask:"0000 0000 0000 0000",regex:"^9792\\d{0,14}",cardType:"troy"},{mask:"0000 000000 00000",regex:"^3[47]\\d{0,13}",cardType:"american-express"},{mask:"0000 0000 0000 0000",regex:"",cardType:"unknown"}],H=j.a.createPipe({mask:E},j.a.PIPE_TYPE.UNMASKED,j.a.PIPE_TYPE.MASKED),D="FETCH_HOTELS",F="SET_HOTELS",P="FETCH_HOTELS_FAILED",A={onInitReservationForm:function(){return g.debug("[actions]","getHotels"),{type:D}}},M=Object(c.b)((function(e){return{data:e.hotels.data,status:e.hotels.status,error:e.hotels.error}}),A),L=a(27),U=a.n(L),B=function(e){var t=[U.a.button];e.extraClasses&&t.push(e.extraClasses),e.inverse&&t.push(U.a["button--inverse"]);var a={primary:U.a["button--primary"],danger:U.a["button--danger"],success:U.a["button--success"],grey:U.a["button--grey"],none:U.a["button--none"]};return e.color?t.push(a[e.color]):t.push(a.primary),e.loading&&t.push(U.a["button--loading"]),Object(p.jsxs)("button",{className:t.join(" "),type:e.type,onClick:e.onClick,disabled:e.disabled,children:["undefined"!==typeof e.loading&&Object(p.jsx)(be,{show:e.loading,extraClasses:U.a.button__spinner}),e.children]})},Y=(a(182),function(e){var t=["credit-card"];return e.isCardFlipped&&t.push("credit-card--flipped"),Object(p.jsxs)("div",{className:t.join(" "),children:[Object(p.jsxs)("div",{className:"credit-card__front-wrapper",children:[e.details.single&&Object(p.jsx)("div",{className:"credit-card__single",children:Object(p.jsx)("img",{src:e.details.single,alt:"Bank logo"})}),Object(p.jsxs)("svg",{className:"credit-card__front",viewBox:"0 0 750 471",children:[Object(p.jsx)("path",{className:["lightcolor",e.details.color].join(" "),d:"M0,0h750v471H0V0z"}),Object(p.jsx)("path",{className:["darkcolor",e.details.color+"dark"].join(" "),d:"M750,471V193.2c-217.6-57.5-556.4-13.5-750,24.9V471H750z"}),Object(p.jsx)("text",{transform:"matrix(1 0 0 1 60.106 295.0121)",className:"credit-card__number st2 st3 st4",children:e.inputs.cardNumber.value?e.inputs.cardNumber.value:"0123 4567 8910 1234"}),Object(p.jsx)("text",{transform:"matrix(1 0 0 1 54.1064 428.1723)",className:"credit-card__holder st2 st5 st6",children:e.inputs.cardHolder.value?e.inputs.cardHolder.value:"JOHN DOE"}),Object(p.jsx)("text",{transform:"matrix(1 0 0 1 54.1074 389.8793)",className:"st7 st5 st8",children:"cardholder name"}),Object(p.jsx)("text",{transform:"matrix(1 0 0 1 479.7754 388.8793)",className:"st7 st5 st8",children:"expiration"}),Object(p.jsx)("text",{transform:"matrix(1 0 0 1 65.1054 241.5)",className:"st7 st5 st8",children:"card number"}),Object(p.jsxs)("text",{transform:"matrix(1 0 0 1 574.4219 433.8095)",className:"credit-card__expire st2 st5 st9",children:[e.inputs.month.value?e.inputs.month.value:"00","/",e.inputs.year.value?e.inputs.year.value.slice(-2):"00"]}),Object(p.jsx)("text",{transform:"matrix(1 0 0 1 479.3848 417.0097)",className:"st2 st10 st11",children:"VALID"}),Object(p.jsx)("text",{transform:"matrix(1 0 0 1 479.3848 435.6762)",className:"st2 st10 st11",children:"THRU"}),Object(p.jsx)("polygon",{className:"st2",points:"554.5,421 540.4,414.2 540.4,427.9"}),Object(p.jsxs)("g",{className:"credit-card__cchip",children:[Object(p.jsx)("path",{className:"st2",d:"M168.1,143.6H82.9c-10.2,0-18.5-8.3-18.5-18.5V74.9c0-10.2,8.3-18.5,18.5-18.5h85.3c10.2,0,18.5,8.3,18.5,18.5v50.2C186.6,135.3,178.3,143.6,168.1,143.6z"}),Object(p.jsx)("rect",{x:"82",y:"70",className:"st12",width:"1.5",height:"60"}),Object(p.jsx)("rect",{x:"167.4",y:"70",className:"st12",width:"1.5",height:"60"}),Object(p.jsx)("path",{className:"st12",d:"M125.5,130.8c-10.2,0-18.5-8.3-18.5-18.5c0-4.6,1.7-8.9,4.7-12.3c-3-3.4-4.7-7.7-4.7-12.3c0-10.2,8.3-18.5,18.5-18.5s18.5,8.3,18.5,18.5c0,4.6-1.7,8.9-4.7,12.3c3,3.4,4.7,7.7,4.7,12.3C143.9,122.5,135.7,130.8,125.5,130.8z M125.5,70.8c-9.3,0-16.9,7.6-16.9,16.9c0,4.4,1.7,8.6,4.8,11.8l0.5,0.5l-0.5,0.5c-3.1,3.2-4.8,7.4-4.8,11.8c0,9.3,7.6,16.9,16.9,16.9s16.9-7.6,16.9-16.9c0-4.4-1.7-8.6-4.8-11.8l-0.5-0.5l0.5-0.5c3.1-3.2,4.8-7.4,4.8-11.8C142.4,78.4,134.8,70.8,125.5,70.8z"}),Object(p.jsx)("rect",{x:"82.8",y:"82.1",className:"st12",width:"25.8",height:"1.5"}),Object(p.jsx)("rect",{x:"82.8",y:"117.9",className:"st12",width:"26.1",height:"1.5"}),Object(p.jsx)("rect",{x:"142.4",y:"82.1",className:"st12",width:"25.8",height:"1.5"}),Object(p.jsx)("rect",{x:"142",y:"117.9",className:"st12",width:"26.2",height:"1.5"})]})]})]}),Object(p.jsx)("div",{className:"credit-card__back-wrapper",children:Object(p.jsxs)("svg",{className:"credit-card__back",viewBox:"0 0 750 471",children:[Object(p.jsx)("line",{className:"st0",x1:"35.3",y1:"10.4",x2:"36.7",y2:"11"}),Object(p.jsx)("path",{className:["darkcolor",e.details.color+"dark"].join(" "),d:"M0,0h750v471H0V0z"}),Object(p.jsx)("rect",{y:"61.6",className:"st2",width:"750",height:"78"}),Object(p.jsx)("path",{className:"st3",d:"M701.1,249.1H48.9c-3.3,0-6-2.7-6-6v-52.5c0-3.3,2.7-6,6-6h652.1c3.3,0,6,2.7,6,6v52.5C707.1,246.4,704.4,249.1,701.1,249.1z"}),Object(p.jsx)("rect",{x:"42.9",y:"198.6",className:"st4",width:"664.1",height:"10.5"}),Object(p.jsx)("rect",{x:"42.9",y:"224.5",className:"st4",width:"664.1",height:"10.5"}),Object(p.jsx)("path",{className:"st5",d:"M701.1,184.6H618h-8h-10v64.5h10h8h83.1c3.3,0,6-2.7,6-6v-52.5C707.1,187.3,704.4,184.6,701.1,184.6z"}),Object(p.jsx)("text",{transform:"matrix(1 0 0 1 621.999 227.2734)",className:"credit-card__cvv st6 st7",children:e.inputs.cardCvv.value?e.inputs.cardCvv.value:"000"}),Object(p.jsx)("text",{transform:"matrix(1 0 0 1 518.083 280.0879)",className:"st9 st6 st10 st8",children:"security code"}),Object(p.jsx)("rect",{x:"58.1",y:"378.6",className:"st11",width:"375.5",height:"13.5"}),Object(p.jsx)("rect",{x:"58.1",y:"405.6",className:"st11",width:"421.7",height:"13.5"}),Object(p.jsx)("text",{transform:"matrix(1 0 0 1 59.5073 228.6099)",className:"credit-card__holder-back st12 st13",children:e.inputs.cardHolder.value?e.inputs.cardHolder.value:"John Doe"})]})})]})}),z=a(91),W=a(87),J=(a(183),a(10)),G=a.n(J),q=["options","id","label","onChange","value","validity","validators","isTouched","validationMessage"],K=function(e,t){return Array.isArray(t)?Array.isArray(e)||!e&&0!==e?Array.isArray(e)&&e.length>0?e.map((function(e){return t.reduce((function(t,a){return a.value===e?a:t}),{})})):null:t.reduce((function(t,a){return a.value===e?a:t}),{}):null},Z=function(e){var t=e.options,a=e.id,s=e.label,n=e.onChange,i=e.value,r=e.validity,c=e.validators,l=e.isTouched,d=e.validationMessage,u=Object(z.a)(e,q);g.debug("[Select.ts]",a);var _=["select"];return!1===r&&l&&_.push("select--invalid"),Object(p.jsxs)("div",{className:_.join(" "),children:[s&&Object(p.jsx)("label",{htmlFor:a,className:G.a.form__label,children:s}),Object(p.jsx)(W.a,Object(o.a)({options:t,inputId:a,instanceId:a,name:a,classNamePrefix:"select",onChange:function(e){var t=null;null!==e&&(t=Array.isArray(e)?e.map((function(e){return e.value})):e.value);var s=O(t,c);n(a,t,s)},value:K(i,t)},u)),Object(p.jsx)("div",{className:G.a.form__info,children:Object(p.jsx)("div",{className:G.a.form__info__content,children:!1===r&&l&&!!d&&Object(p.jsx)("p",{className:G.a["form__info__invalid-text"],children:d})})})]})};function Q(e,t){return b.a.isEqual(e,t)}var X=Object(s.memo)(Z,Q),$=a(29),ee=a.n($),te=n.a.forwardRef((function(e,t){var a=e.id,s=e.onChange,n=e.value,i=e.validity,r=e.validators,c=e.isTouched,l=e.type,d=e.placeholder,u=e.autocomplete,_=e.label,v=e.validationMessage,h=e.disabled,m=e.disabledMessage;g.debug("[TextField.ts]",a);var b=function(e){var t=e.target.value,n=O(t,r);s(a,t,n)},j=[G.a.form__element,ee.a.input,ee.a["input--simple"]];!1===i&&c&&j.push(ee.a.invalid),n&&j.push(ee.a["has-value"]);var x=[G.a.form__label],f={};return"undefined"!==typeof h&&h&&(f.disabled=!0),"undefined"!==typeof t&&t&&(f.ref=t),Object(p.jsxs)("div",{className:j.join(" "),children:[_&&Object(p.jsx)("label",{className:x.join(" "),htmlFor:a,children:_}),Object(p.jsx)("div",{className:ee.a["input__inner-wrapper"],children:"textarea"===l?Object(p.jsx)("textarea",Object(o.a)({id:a,name:a,className:ee.a.input__field,rows:3,onChange:b,value:n},f)):Object(p.jsx)("input",Object(o.a)({id:a,name:a,className:ee.a.input__field,type:l,placeholder:d,autoComplete:u,onChange:b,value:n},f))}),Object(p.jsx)("div",{className:G.a.form__info,children:Object(p.jsxs)("div",{className:G.a.form__info__content,children:[!1===i&&c&&v&&Object(p.jsx)("p",{className:G.a["form__info__invalid-text"],children:v}),!0===f.disabled&&Object(p.jsx)("p",{className:G.a["form__info__warning-text"],children:m})]})})]})}));function ae(e,t){return V(e,t,["value","validity","validators","isTouched","disabled"])}var se=Object(s.memo)(te,ae),ne=a(24),ie=a.n(ne),re=function(e){var t=e.id,a=e.onChange,s=e.value,n=e.validity,i=e.validators,r=e.isTouched,c=e.label,o=e.validationMessage,l=e.options;g.debug("[ImageCheckbox.ts]");var d=function(e){var s=e.target.value,n=O(s,i);a(t,s,n)},u=[G.a.form__element];return!1===n&&r&&u.push(ie.a.invalid),u.push(ie.a["image-checkboxes"]),c||u.push(ie.a["checkbox--no-label"]),Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:u.join(" "),children:[Object(p.jsx)("h4",{className:G.a.form__label,children:c}),Object(p.jsx)("div",{className:ie.a["image-checkboxes__inner"],children:l.length>0&&l.map((function(e,a){return Object(p.jsxs)("div",{className:ie.a["image-checkbox"],children:[Object(p.jsx)("input",{type:"radio",id:e.id,name:t,className:ie.a["image-checkbox__field"],onChange:d,value:e.id,checked:e.id===s}),Object(p.jsxs)("label",{htmlFor:e.id,className:ie.a["image-checkbox__label"],children:[Object(p.jsx)("h5",{className:ie.a["image-checkbox__label__title"],children:e.label}),e.imgUrl&&Object(p.jsx)("div",{className:ie.a["image-checkbox__label__img-wrapper"],children:Object(p.jsx)("img",{src:e.imgUrl,alt:e.label,className:ie.a["image-checkbox__label__img"]})}),e.meta&&Object(p.jsx)("p",{className:ie.a["image-checkbox__label__meta"],children:e.meta})]})]},a)}))}),Object(p.jsx)("div",{className:G.a.form__info,children:Object(p.jsx)("div",{className:G.a.form__info__content,children:!1===n&&r&&!!o&&Object(p.jsx)("p",{className:G.a["form__info__invalid-text"],children:!!o&&o})})})]})})};function ce(e,t){return V(e,t,["options","value","validity","validators","isTouched"])}var oe=Object(s.memo)(re,ce),le=a(36),de=a.n(le),ue=function(e){return Object(p.jsxs)("header",{className:de.a.header,children:[Object(p.jsxs)("div",{className:de.a.header__logo,children:[Object(p.jsx)("span",{className:de.a.header__logo__title,children:"Awesome Hotel"}),Object(p.jsx)("span",{className:de.a.header__logo__slogan,children:"Reservation System"})]}),0!==e.activeStep&&Object(p.jsx)("div",{className:de.a.header__actions,children:Object(p.jsx)(B,{type:"button",onClick:function(){e.stepChangeHandler(0,{isValid:!1,inputs:{},hasChanged:!1},0),C()},children:"Make a new reservation"})})]})},_e=a(83),pe=a.n(_e),ve=function(e){var t=e.children;return Object(p.jsx)("div",{className:pe.a.portlet,children:t})},he=a(56),me=a.n(he),be=function(e){var t=[me.a.loader];return e.extraClasses&&t.push(e.extraClasses),e.absolute?Object(p.jsx)("div",{className:me.a["loader-abs"],children:Object(p.jsxs)("div",{className:t.join(" "),children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),"Loading..."]})}):Object(p.jsxs)("div",{className:t.join(" "),children:[Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),Object(p.jsx)("div",{}),"Loading..."]})},je=a(15),xe=a(34),fe=function(e,t){switch(t.type){case"INPUT_CHANGE":var a=!0;for(var s in e.inputs)e.inputs[s]&&(a=s===t.inputId?a&&t.isValid:a&&e.inputs[s].isValid);var n=Object(o.a)(Object(o.a)({},e.inputs[t.inputId]),{},{value:t.value,isValid:t.isValid}),i=Object(o.a)(Object(o.a)({},e.inputs),{},Object(xe.a)({},t.inputId,n));return e.inputs[t.inputId].isTouched||(n.isTouched=!0),Object(o.a)(Object(o.a)({},e),{},{inputs:i,isValid:a,hasChanged:!1});default:return e}},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Object(s.useReducer)(fe,{inputs:e,isValid:t,hasChanged:!1}),n=Object(je.a)(a,2),i=n[0],r=n[1],c=Object(s.useCallback)((function(e,t,a){r({type:"INPUT_CHANGE",inputId:e,value:t,isValid:a})}),[]);return[i,c]},Oe="UPDATE_CART",ye="CHECK_COUPON",we="APPLY_COUPON",ke="CHECK_COUPON_FAILED",Ne="NEW_RESERVATION",Ce="NEW_RESERVATION_FINISH",Te="NEW_RESERVATION_FAILED",Se="DELETE_RESERVATION",Ie="DELETE_RESERVATION_FINISH",Re="DELETE_RESERVATION_FAILED",Ve=function(e){g.debug("[actions]","updateCart",e);var t=function(e){var t=Object.keys(e),a=t.length,s={};if(!a)return{};for(var n=0;n<a;n+=1){var i=t[n],r=e[i].value;s[i]=r}return s}(e);return"undefined"!==typeof t.checkin&&"undefined"!==typeof t.checkout&&(t.days=T(t.checkin,t.checkout)),"undefined"!==typeof t.hotel&&(t.hotelId=t.hotel,delete t.hotel),{type:Oe,data:t}},Ee=function(e){g.debug("[actions]","applyCoupon",e);var t={data:Object(o.a)({},e),status:"resolved",error:""};return{type:we,data:t}},He=function(e){g.debug("[actions]","setNewReservation",e);var t={data:e,status:"resolved",error:""};return e.id&&localStorage.setItem("reservationId",e.id),{type:Ce,data:t}},De=function(e){g.debug("[actions]","finishDeleteReservation",e);var t={data:e,status:"resolved",error:""};return C(),{type:Ie,data:t}},Fe=function(e,t){var a=Object(s.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(s){return console.log("\ud83d\udd25",s),t}})),n=Object(je.a)(a,2),i=n[0],r=n[1];return[i,function(t){try{var a=t instanceof Function?t(i):t;r(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(s){console.log("\ud83d\udd25",s)}}]},Pe={steps:{0:{isValid:!1,status:"completed"},1:{isValid:!1,status:"uncompleted"},2:{isValid:!1,status:"uncompleted"}},currentStep:0},Ae=function(){var e=Fe("steps",Pe),t=Object(je.a)(e,2),a=t[0],n=t[1],i=Object(s.useState)(a),r=Object(je.a)(i,2),l=r[0],d=r[1],u=Object(c.c)(),_=Object(s.useCallback)((function(e){d(e),n(e)}),[n]),p=Object(s.useCallback)((function(e,t,a){var s=!t.isValid&&!Object.keys(t.inputs).length,n=Pe;s||(n={steps:Object(o.a)(Object(o.a)({},l.steps),{},Object(xe.a)({},e,{isValid:t.isValid,status:"completed"})),currentStep:a}),_(n),u(Ve(t.inputs))}),[u,l.steps,_]);return{stepsState:l,stepChangeHandler:p}},Me=function(){var e,t=Object(c.d)((function(e){return e.hotels.data.names})),a=Object(c.d)((function(e){return e.hotels.data.details})),s=Object(c.d)((function(e){return e.cart})),n=I(s,a),i=t.find((function(e){return e.id===s.hotelId}));return a&&(e=a.find((function(e){return e.id===s.hotelId}))),{hotels:{names:t||[],details:a||[]},roomDetails:n,selectedHotel:{name:(null===i||void 0===i?void 0:i.hotel_name)||"",details:e}}},Le=function(){var e,t,a,n,i,r,o=Object(c.d)((function(e){return e.cart})),l=Object(c.d)((function(e){return e.hotels.data.details})),d=Object(c.c)(),u={status:null===(e=o.coupon)||void 0===e?void 0:e.status,error:null===(t=o.coupon)||void 0===t?void 0:t.error,id:null===(a=o.coupon)||void 0===a?void 0:a.data.id,code:null===(n=o.coupon)||void 0===n?void 0:n.data.code,discountAmmount:null===(i=o.coupon)||void 0===i?void 0:i.data.discount_ammount,expiration:null===(r=o.coupon)||void 0===r?void 0:r.data.expiration_at},_=Object(s.useCallback)((function(e){var t;d((t=e,g.debug("[actions]","checkCoupon",t),{type:ye,couponCode:t}))}),[d]),p=Object(s.useCallback)((function(e){d(function(e,t,a){g.debug("[actions]","newReservation",e);var s=I(e,t),n=R(e,t),i={hotel_id:e.hotelId?+e.hotelId:0,start_date:e.checkin?e.checkin:"",end_date:e.checkout?e.checkout:"",adult:e.adults?+e.adults:1,child:"undefined"!==typeof e.children?+e.children:0,room_type:s?s.type.id:0,room_scenic:s?s.view.id:0,price:n.final,coupon_code:e.coupon&&e.coupon.data.code?e.coupon.data.code:"",card_name:a.cardHolder.value,card_number:a.cardNumber.value,card_date_month:a.month.value,card_date_year:a.year.value,card_cvv:a.cardCvv.value};return{type:Ne,data:i}}(o,l,e))}),[d,o,l]),v=Object(s.useCallback)((function(){d(function(){var e=N("reservationId");return g.debug("[actions]","deleteReservation",e),e?{type:Se,reservationId:e}:{type:Re,error:"Cannot find reservation ID."}}())}),[d]);return{cart:o,coupon:u,totals:R(o,l),dispatchCheckCoupon:_,dispatchNewReservation:p,dispatchDeleteReservation:v}},Ue=a.p+"static/media/amex-single.c2c023b7.svg",Be=a.p+"static/media/amex.0e1201dd.svg",Ye=a.p+"static/media/diners-single.c05f555b.svg",ze=a.p+"static/media/diners.10e38ce8.svg",We=a.p+"static/media/discover-single.4a41ea44.svg",Je=a.p+"static/media/discover.e5d1b6a2.svg",Ge=a.p+"static/media/jcb-single.4be05fa3.svg",qe=a.p+"static/media/jcb.dae3a79b.svg",Ke=a.p+"static/media/maestro-single.7239befc.svg",Ze=a.p+"static/media/maestro.ce34c4f0.svg",Qe=a.p+"static/media/mastercard-single.025ae0d8.svg",Xe=a.p+"static/media/mastercard.c27623c5.svg",$e=a.p+"static/media/troy-single.81a78fd2.svg",et=a.p+"static/media/troy.3f3f5de2.svg",tt=a.p+"static/media/unionpay-single.fd0d4860.svg",at=a.p+"static/media/unionpay.b454a4fd.svg",st=a.p+"static/media/visa-single.9c4e952e.svg",nt={"american-express":{icon:Be,single:Ue,color:"green"},visa:{icon:a.p+"static/media/visa.ca0a7183.svg",single:st,color:"lime"},diners:{icon:ze,single:Ye,color:"orange"},discover:{icon:Je,single:We,color:"purple"},jcb:{icon:qe,single:Ge,color:"red"},jcb15:{icon:qe,single:Ge,color:"red"},maestro:{icon:Ze,single:Ke,color:"yellow"},mastercard:{icon:Xe,single:Qe,color:"lightblue"},unionpay:{icon:at,single:tt,color:"cyan"},troy:{icon:et,single:$e,color:"cyan"}},it=function(){var e=Object(s.useState)({icon:"",single:"",color:"grey"}),t=Object(je.a)(e,2),a=t[0],n=t[1],i=Object(s.useState)(!1),r=Object(je.a)(i,2),c=r[0],o=r[1],l=Object(s.useCallback)((function(e){var t=function(e){for(var t=E.length,a=0;a<t;a+=1){var s=E[a].regex,n=new RegExp(s);if(null!=e.match(n))return E[a]}}(e);t&&"undefined"!==typeof nt[t.cardType]?n(nt[t.cardType]):n({icon:"",single:"",color:"grey"})}),[]),d=Object(s.useCallback)((function(e){e instanceof HTMLInputElement?(e.addEventListener("focus",(function(){o(!0)})),e.addEventListener("blur",(function(){o(!1)}))):o(!c)}),[c]);return{cardDetails:a,updateCardDetails:l,isCardFlipped:c,turnCardHandler:d}},rt=a(35),ct=a.n(rt),ot=function(e){return Object(p.jsxs)("li",{className:ct.a["reservation-details__item"],children:[Object(p.jsx)("span",{className:ct.a["reservation-details__item__title"],children:e.title}),Object(p.jsx)("span",{className:ct.a["reservation-details__item__value"],children:e.value})]})},lt=a(42),dt=a.n(lt),ut=function(e){var t=Le(),a=t.coupon,n=t.dispatchCheckCoupon,i=Object(s.useState)(""),r=Object(je.a)(i,2),c=r[0],o=r[1];return Object(p.jsxs)("li",{className:dt.a["reservation-details__coupon"],children:[Object(p.jsxs)("div",{className:dt.a["reservation-details__coupon__content"],children:[Object(p.jsx)(se,{id:"coupon",type:"text",value:c,validity:!0,isTouched:!0,onChange:function(e,t,a){o(t)},placeholder:"Coupon code..."}),Object(p.jsx)(B,{type:"button",onClick:function(){n(c),o("")},disabled:c.length<3,loading:"pending"===a.status,children:"Apply"})]}),a.discountAmmount&&!a.error?Object(p.jsxs)("p",{className:dt.a["reservation-details__coupon__success"],children:[a.discountAmmount,"% discount applied successfully."]}):"rejected"===a.status&&a.error?Object(p.jsx)("p",{className:dt.a["reservation-details__coupon__error"],children:a.error}):void 0]})},_t=a(17),pt=a.n(_t),vt=function(e){var t=Le(),a=t.cart,s=t.coupon,n=t.totals,i=0;s.id&&(i=(s.discountAmmount?s.discountAmmount:0)/100*n.final);return Object(p.jsxs)("li",{className:pt.a["reservation-details__totals"],children:[Object(p.jsxs)("div",{className:pt.a["reservation-details__totals__item"],children:[Object(p.jsx)("span",{className:pt.a["reservation-details__totals__title"],children:"Room price"}),Object(p.jsxs)("span",{className:pt.a["reservation-details__totals__value"],children:[n.room," TL"]})]}),Object(p.jsxs)("div",{className:pt.a["reservation-details__totals__item"],children:[Object(p.jsx)("span",{className:pt.a["reservation-details__totals__title"],children:"Price impact ratio"}),Object(p.jsxs)("span",{className:pt.a["reservation-details__totals__value"],children:[n.ratio,"%"]})]}),Object(p.jsxs)("div",{className:pt.a["reservation-details__totals__item"],children:[Object(p.jsxs)("span",{className:pt.a["reservation-details__totals__title"],children:["Accomodation"," ",Object(p.jsxs)("span",{children:[a.days," ",a.days&&+a.days>1?"Days":"Day"]})]}),Object(p.jsxs)("span",{className:pt.a["reservation-details__totals__value"],children:[n.total.toFixed(2)," TL"]})]}),s.code&&Object(p.jsxs)("div",{className:pt.a["reservation-details__totals__item"],children:[Object(p.jsxs)("span",{className:pt.a["reservation-details__totals__title"],children:["Discount ",Object(p.jsxs)("span",{children:["(",s.code,")"]})]}),Object(p.jsxs)("span",{className:pt.a["reservation-details__totals__value"],children:["-",i.toFixed(2)," TL"]})]}),Object(p.jsxs)("div",{className:pt.a["reservation-details__totals__total"],children:[Object(p.jsx)("span",{className:pt.a["reservation-details__totals__title"],children:"Total amount"}),Object(p.jsxs)("span",{className:pt.a["reservation-details__totals__value"],children:[(n.final-i).toFixed(2)," TL"]})]})]})},ht=a(49),mt=a.n(ht),bt=function(e){var t,a=Me(),s=a.roomDetails,n=a.selectedHotel,i=Le().cart;if(!i.hotelId)return null;var r=function(t){if(!i.checkin||!i.checkout||!i.adults||!i.children)return null;var a={checkin:Object(p.jsx)(ot,{title:"Check-in date",value:i.checkin}),checkout:Object(p.jsx)(ot,{title:"Check-out date",value:i.checkout}),adults:Object(p.jsx)(ot,{title:"Adults",value:i.adults}),children:Object(p.jsx)(ot,{title:"Children",value:i.children}),room:s&&s.type?Object(p.jsx)(ot,{title:"Room",value:s.type.title}):null,view:s&&s.view?Object(p.jsx)(ot,{title:"View",value:s.view.title}):null,coupon:Object(p.jsx)(ut,{}),totals:Object(p.jsx)(vt,{})};return e.show.includes(t)?a[t]:null},c=[mt.a["reservation-details"]];return e.type&&c.push(ct.a["reservation-details--boxes"]),Object(p.jsxs)("div",{className:c.join(" "),children:[Object(p.jsxs)("h2",{className:mt.a["reservation-details__title"],children:[n?n.name:""," ",(null===n||void 0===n||null===(t=n.details)||void 0===t?void 0:t.city)&&Object(p.jsx)("span",{children:"(".concat(n.details.city,")")})]}),Object(p.jsxs)("ul",{className:mt.a["reservation-details__list"],children:[r("checkin"),r("checkout"),r("adults"),r("children"),r("room"),r("view"),r("coupon"),r("totals")]})]})},jt=a(84),xt=a.n(jt),ft=function(e){return Object(p.jsx)("div",{className:xt.a.steps,children:e.children})},gt=a(37),Ot=a.n(gt),yt=function(e){var t=N("steps"),a=t?t.currentStep===e.index:0===e.index,s=!!t&&"completed"===t.steps[e.index].status,n=[Ot.a.steps__item];return(a||s)&&n.push(Ot.a["steps__item--active"]),Object(p.jsxs)("button",{className:n.join(" "),type:"button",onClick:function(){t&&3===t.currentStep||!a&&s&&t&&e.stepChangeHandler(t.currentStep,{isValid:!0,inputs:{},hasChanged:!0},e.index)},children:[Object(p.jsx)("div",{className:Ot.a["steps__img-wrapper"],children:Object(p.jsx)("img",{src:e.imgUrl,alt:e.title,className:Ot.a.steps__img})}),Object(p.jsx)("h3",{className:Ot.a.steps__title,children:e.title})]})},wt=new Date;wt.setDate(wt.getDate()+1),wt=wt.toString();var kt={index:0,isValid:!1,inputs:{hotel:{value:"",isTouched:!1,isValid:!1},checkin:{value:"",isTouched:!1,isValid:!1},checkout:{value:"",isTouched:!1,isValid:!1},adults:{value:"1",isTouched:!1,isValid:!1},children:{value:"0",isTouched:!1,isValid:!1}}},Nt=function(e){var t,a=Fe("step-".concat(kt.index),kt),n=Object(je.a)(a,2),i=n[0],r=n[1],c=ge(i.inputs,i.isValid),l=Object(je.a)(c,2),d=l[0],u=l[1],_=Me().hotels,v=Object(s.useState)([[f.a.isDate],[f.a.isAfter]]),h=Object(je.a)(v,2),m=h[0],b=h[1],j=Object(s.useState)([[f.a.isDate],[f.a.isAfter,wt]]),x=Object(je.a)(j,2),g=x[0],O=x[1],y=d.inputs.hotel.value;_&&(t=_.details.find((function(e){return e.id===y})));var w=5;t&&"undefined"!==typeof t.max_adult_size&&(w=t.max_adult_size);var k=!1;return t&&"undefined"!==typeof t.child_status&&(k=!t.child_status),Object(p.jsx)(ve,{children:Object(p.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(p.jsx)("div",{className:G.a["form__wide-row"],children:Object(p.jsx)(X,{id:"hotel",label:"Choose a hotel",options:_?_.names.map((function(e){return{label:e.hotel_name,value:e.id}})):[],onChange:function(e,t,a){u(e,t,a),k||u("children","0",!0),u("adults","1",!0)},value:d.inputs.hotel.value,validity:d.inputs.hotel.isValid,isTouched:d.inputs.hotel.isTouched,validators:[[f.a.isEmpty]],validationMessage:"Please select a hotel"})}),Object(p.jsxs)("div",{className:G.a["form__wide-row"],children:[Object(p.jsx)(se,{id:"checkin",type:"date",label:"Check-in",value:d.inputs.checkin.value,validity:d.inputs.checkin.isValid,isTouched:d.inputs.checkin.isTouched,validators:m,validationMessage:"Please select a valid check-in date.",onChange:function(e,t,a){u(e,t,a),d.inputs.checkout.value||O([[f.a.isDate],[f.a.isAfter,t]])}}),Object(p.jsx)(se,{id:"checkout",type:"date",label:"Check-out",value:d.inputs.checkout.value,validity:d.inputs.checkout.isValid,isTouched:d.inputs.checkout.isTouched,validators:g,validationMessage:"Please select a valid check-out date.",onChange:function(e,t,a){u(e,t,a),d.inputs.checkin.value||b([[f.a.isDate],[f.a.isAfter],[f.a.isBefore,t]])}}),Object(p.jsx)(se,{id:"adults",type:"number",label:"Adults",value:d.inputs.adults.value,validity:d.inputs.adults.isValid,isTouched:d.inputs.adults.isTouched,validators:[[f.a.isInt,{min:1,max:w}]],validationMessage:"Please enter a valid number between 1 and ".concat(w,"."),onChange:u}),Object(p.jsx)(se,{id:"children",type:"number",label:"Children",value:d.inputs.children.value,validity:d.inputs.children.isValid,isTouched:d.inputs.children.isTouched,validators:[[f.a.isInt,{min:0,max:5}]],validationMessage:"Please enter a valid number between 0 and 5.",onChange:u,disabled:k,disabledMessage:"Children are not allowed"})]}),Object(p.jsx)("div",{className:[G.a["form__normal-row"],G.a.form__actions].join(" "),children:Object(p.jsx)(B,{type:"button",onClick:function(){d.isValid&&(e.stepChangeHandler(kt.index,d,kt.index+1),r(Object(o.a)(Object(o.a)({},kt),{},{isValid:d.isValid,inputs:Object(o.a)({},d.inputs)})))},disabled:!d.isValid,children:"Save and continue"})})]})})},Ct=a(38),Tt=a.n(Ct),St={index:2,isValid:!1,inputs:{cardHolder:{value:"",isTouched:!1,isValid:!1},cardNumber:{value:"",isTouched:!1,isValid:!1},month:{value:"",isTouched:!1,isValid:!1},year:{value:"",isTouched:!1,isValid:!1},cardCvv:{value:"",isTouched:!1,isValid:!1}}},It=function(e){var t=Fe("step-".concat(St.index),St),a=Object(je.a)(t,2),n=a[0],i=a[1],r=ge(n.inputs,n.isValid),c=Object(je.a)(r,2),l=c[0],d=c[1],u=Le(),_=u.cart,v=u.dispatchNewReservation,h=it(),m=h.cardDetails,b=h.updateCardDetails,j=h.isCardFlipped,x=h.turnCardHandler,g=Object(s.useState)([]),O=Object(je.a)(g,2),N=O[0],C=O[1];return Object(s.useEffect)((function(){N.length||C(k(l.inputs.year.value).map((function(e){return{label:e,value:e}})))}),[l.inputs.year.value,N.length]),Object(s.useEffect)((function(){"resolved"===_.newReservation.status&&(e.stepChangeHandler(St.index,l,St.index+1),i(Object(o.a)(Object(o.a)({},St),{},{isValid:l.isValid,inputs:Object(o.a)({},l.inputs)})))}),[_.newReservation.status,l,e,i]),N.length&&Object.keys(l.inputs).length?Object(p.jsx)(ve,{children:Object(p.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(p.jsxs)("div",{className:Tt.a["preview-payment"],children:[Object(p.jsx)("div",{className:Tt.a["preview-payment__card"],onClick:x,children:Object(p.jsx)(Y,{inputs:l.inputs,isCardFlipped:j,details:m})}),Object(p.jsx)("div",{className:Tt.a["preview-payment__details"],children:Object(p.jsx)(bt,{type:"boxes",show:["checkin","checkout","adults","children","room","view","coupon","totals"]})}),Object(p.jsxs)("div",{className:Tt.a["preview-payment__form"],children:[Object(p.jsx)("div",{className:G.a["form__wide-row"],children:Object(p.jsx)(se,{id:"cardHolder",type:"text",label:"Card holder name",value:l.inputs.cardHolder.value,validity:l.inputs.cardHolder.isValid,isTouched:l.inputs.cardHolder.isTouched,validators:[[y]],validationMessage:"Please enter a valid card holder name",onChange:d})}),Object(p.jsxs)("div",{className:G.a["form__wide-row"],children:[m.icon&&Object(p.jsx)("img",{className:Tt.a["credit-card-icon"],src:m.icon,alt:"Bank logo"}),Object(p.jsx)(se,{id:"cardNumber",type:"text",label:"Card number",value:l.inputs.cardNumber.value,validity:l.inputs.cardNumber.isValid,isTouched:l.inputs.cardNumber.isTouched,validators:[[f.a.isCreditCard]],validationMessage:"Please enter a valid card number",onChange:function(e,t,a){d(e,H(t),a),b(t)}})]}),Object(p.jsxs)("div",{className:G.a["form__wide-row"],children:[Object(p.jsxs)("div",{className:G.a["form__have-two"],children:[Object(p.jsx)("span",{className:G.a.form__label,children:"Card expiration date"}),Object(p.jsx)(X,{id:"month",options:N,onChange:d,value:l.inputs.month.value,validity:l.inputs.month.isValid,isTouched:l.inputs.month.isTouched,validators:[[f.a.isEmpty]],validationMessage:"Please select a valid expiration month"}),Object(p.jsx)(X,{id:"year",options:w().map((function(e){return{label:e.toString(),value:e.toString()}})),onChange:function(e,t,a){d(e,t,a),C(k(t).map((function(e){return{label:e,value:e}})));var s=l.inputs.month.value,n=+t===(new Date).getFullYear(),i=s&&+s<(new Date).getMonth()+1;n&&i&&d("month","",!1)},value:l.inputs.year.value,validity:l.inputs.year.isValid,isTouched:l.inputs.year.isTouched,validators:[[f.a.isEmpty]],validationMessage:"Please select a valid expiration year"})]}),Object(p.jsx)(se,{id:"cardCvv",type:"text",label:"CVV",value:l.inputs.cardCvv.value,validity:l.inputs.cardCvv.isValid,isTouched:l.inputs.cardCvv.isTouched,validators:[[f.a.isNumeric],[f.a.isLength,{min:3,max:4}]],validationMessage:"Please enter a valid CVV",onChange:d,ref:x})]}),_.newReservation&&"rejected"===_.newReservation.status&&_.newReservation.error&&Object(p.jsx)("div",{className:G.a["form__wide-row"],children:Object(p.jsx)("p",{className:G.a.form__error,children:_.newReservation.error})})]})]}),Object(p.jsxs)("div",{className:[G.a["form__normal-row"],G.a.form__actions].join(" "),children:[Object(p.jsx)(B,{type:"button",color:"none",onClick:function(){e.stepChangeHandler(St.index,l,St.index-1)},children:"Back"}),Object(p.jsx)(B,{type:"button",onClick:function(){l.isValid&&v(l.inputs)},disabled:!l.isValid,loading:"pending"===_.newReservation.status,children:"Pay and finish"})]})]})}):null},Rt={index:1,isValid:!1,inputs:{roomType:{value:"",isTouched:!1,isValid:!1},viewType:{value:"",isTouched:!1,isValid:!1}}},Vt=function(e){var t,a,s=Fe("step-".concat(Rt.index),Rt),n=Object(je.a)(s,2),i=n[0],r=n[1],c=ge(i.inputs,i.isValid),l=Object(je.a)(c,2),d=l[0],u=l[1],_=Le().cart,v=Me().selectedHotel,h=[];(null===v||void 0===v||null===(t=v.details)||void 0===t?void 0:t.room_type.length)&&v.details.room_type.forEach((function(e){h.push({id:"roomType-".concat(e.id),label:e.title,meta:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("span",{children:[_.days," ",_.days&&+_.days>1?"Days":"Day",Object(p.jsx)("br",{}),_.adults," ",_.adults&&+_.adults>1?"Adults":"Adult"]}),Object(p.jsxs)("span",{children:[_.days&&_.adults&&S(e.price,+_.days,+_.adults).toFixed(2)," ","TL"]})]}),imgUrl:e.photo})}));var m=[];return(null===v||void 0===v||null===(a=v.details)||void 0===a?void 0:a.room_scenic.length)&&v.details.room_scenic.forEach((function(e){m.push({id:"viewType-".concat(e.id),label:e.title,meta:Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{children:"Price impact ratio"}),Object(p.jsxs)("span",{children:["+ ",e.price_rate," %"]})]}),imgUrl:e.photo})})),Object(p.jsx)(ve,{children:Object(p.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},children:[Object(p.jsx)("div",{className:G.a["form__wide-row"],children:Object(p.jsx)(bt,{show:["checkin","checkout","adults","children"]})}),Object(p.jsx)("h4",{className:[G.a.form__label,G.a.form__section__title].join(" "),children:"Room selection"}),Object(p.jsx)("div",{className:G.a["form__wide-row"],children:Object(p.jsx)(oe,{id:"roomType",value:d.inputs.roomType.value,validity:d.inputs.roomType.isValid,isTouched:d.inputs.roomType.isTouched,validators:[[f.a.isEmpty]],validationMessage:"Please select a room type.",onChange:u,options:h})}),Object(p.jsx)("h4",{className:[G.a.form__label,G.a.form__section__title].join(" "),children:"View selection"}),Object(p.jsx)("div",{className:G.a["form__wide-row"],children:Object(p.jsx)(oe,{id:"viewType",value:d.inputs.viewType.value,validity:d.inputs.viewType.isValid,isTouched:d.inputs.viewType.isTouched,validators:[[f.a.isEmpty]],validationMessage:"Please select a view type.",onChange:u,options:m})}),Object(p.jsxs)("div",{className:[G.a["form__normal-row"],G.a.form__actions].join(" "),children:[Object(p.jsx)(B,{type:"button",color:"none",onClick:function(){e.stepChangeHandler(Rt.index,d,Rt.index-1)},children:"Back"}),Object(p.jsx)(B,{type:"button",onClick:function(){d.isValid&&(e.stepChangeHandler(Rt.index,d,Rt.index+1),r(Object(o.a)(Object(o.a)({},Rt),{},{isValid:d.isValid,inputs:Object(o.a)({},d.inputs)})))},disabled:!d.isValid,children:"Save and continue"})]})]})})},Et=a(31),Ht=a.n(Et),Dt=a.p+"static/media/fireworks.3cd8918c.svg",Ft=function(e){var t=Le(),a=t.cart,n=t.dispatchDeleteReservation,i=e.stepChangeHandler;return Object(s.useEffect)((function(){"idle"!==a.newReservation.status||a.newReservation.data.id||(i(0,{isValid:!1,inputs:{},hasChanged:!1},0),C())}),[a.newReservation.data.id,a.newReservation.status,i]),Object(p.jsx)(ve,{children:Object(p.jsxs)("div",{className:Ht.a.finish,children:[Object(p.jsxs)("div",{className:Ht.a.finish__content,children:[Object(p.jsx)("div",{className:Ht.a["finish__img-wrapper"],children:Object(p.jsx)("img",{src:Dt,alt:"Your reservation record has been received."})}),Object(p.jsx)("h1",{className:Ht.a.finish__title,children:"Your reservation record has been received."}),Object(p.jsx)("p",{className:Ht.a.finish__text,children:"Your reservation summary is as shown below. You can use the links below to update your reservation record or make a new reservation."}),Object(p.jsxs)("div",{className:Ht.a.finish__actions,children:[Object(p.jsx)(B,{type:"button",onClick:function(){i(0,{isValid:!1,inputs:{},hasChanged:!1},0),C()},children:"Make a new reservation"}),Object(p.jsx)(B,{type:"button",onClick:function(){i(0,{isValid:!0,inputs:{},hasChanged:!0},0)},children:"Update reservation"}),Object(p.jsx)(B,{type:"button",onClick:function(){window.confirm("Are you sure you want to delete your reservation?")&&n()},loading:"pending"===a.newReservation.status,children:"Cancel reservation"})]})]}),Object(p.jsx)(bt,{type:"boxes",show:["checkin","checkout","adults","children","room","view","totals"]})]})})},Pt=a.p+"static/media/calendar.36e28671.svg",At=a.p+"static/media/bed.a98e1d57.svg",Mt=a.p+"static/media/credit-card.7865e1a8.svg",Lt=v(M((function(e){var t=Ae(),a=t.stepsState,n=t.stepChangeHandler,i=e.onInitReservationForm,r=e.data,c=e.status,o=e.error;Object(s.useEffect)((function(){!r.names||r.names.length||o||i()}),[i,r,o]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(ue,{activeStep:a.currentStep,stepChangeHandler:n}),Object(p.jsxs)("main",{className:"container",children:[Object(p.jsxs)(ft,{children:[Object(p.jsx)(yt,{imgUrl:Pt,title:"Hotel & Date",index:0,stepChangeHandler:n}),Object(p.jsx)(yt,{imgUrl:At,title:"Room type & View",index:1,stepChangeHandler:n}),Object(p.jsx)(yt,{imgUrl:Mt,title:"Preview & Payment",index:2,stepChangeHandler:n})]}),"pending"===c&&Object(p.jsx)(be,{}),"resolved"===c&&(0===a.currentStep?Object(p.jsx)(Nt,{stepChangeHandler:n}):1===a.currentStep?Object(p.jsx)(Vt,{stepChangeHandler:n}):2===a.currentStep?Object(p.jsx)(It,{stepChangeHandler:n}):3===a.currentStep?Object(p.jsx)(Ft,{stepChangeHandler:n}):void 0),"rejected"===c&&o&&Object(p.jsx)("h3",{style:{textAlign:"center",color:"red"},children:o})]})]})}))),Ut=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,216)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),i(e),r(e)}))},Bt=a(28),Yt=a(85),zt=a(89),Wt={data:{names:[],details:[]},status:"pending",error:""},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(g.debug("[reducer]","reducer","hotelsReducer",t),t.type){case F:return Object(o.a)(Object(o.a)({},e),{},{data:{names:t.data.names,details:t.data.details},status:"resolved",error:""});case P:return Object(o.a)(Object(o.a)({},e),{},{data:{names:[],details:[]},status:"rejected",error:t.error});default:return e}},Gt=function(){var e=N("step-0"),t=N("step-1"),a=N("reservationId");return{hotelId:e?e.inputs.hotel.value:"",checkin:e?e.inputs.checkin.value:"",checkout:e?e.inputs.checkout.value:"",days:e?T(e.inputs.checkin.value,e.inputs.checkout.value):0,adults:e?e.inputs.adults.value:"",children:e?e.inputs.children.value:"",roomType:t?t.inputs.roomType.value:"",viewType:t?t.inputs.viewType.value:"",coupon:{data:{},status:"idle",error:""},newReservation:{data:{id:a},status:"idle",error:""}}},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt(),t=arguments.length>1?arguments[1]:void 0;switch(g.debug("[reducer]","cartReducer",t),t.type){case Oe:return Object.keys(t.data).length?Object(o.a)(Object(o.a)({},e),t.data):Gt();case ye:return Object(o.a)(Object(o.a)({},e),{},{coupon:{data:{},status:"pending",error:""}});case we:return Object(o.a)(Object(o.a)({},e),{},{coupon:Object(o.a)({},t.data)});case ke:return Object(o.a)(Object(o.a)({},e),{},{coupon:{data:{},status:"rejected",error:t.error?t.error:"Something went wrong."}});case Ne:return Object(o.a)(Object(o.a)({},e),{},{newReservation:{data:{},status:"pending",error:""}});case Ce:return Object(o.a)(Object(o.a)({},e),{},{newReservation:Object(o.a)({},t.data)});case Te:return Object(o.a)(Object(o.a)({},e),{},{newReservation:{data:{},status:"rejected",error:t.error?t.error:"Something went wrong."}});case Se:return Object(o.a)(Object(o.a)({},e),{},{newReservation:{data:{},status:"pending",error:""}});case Ie:return Gt();case Re:return Object(o.a)(Object(o.a)({},e),{},{newReservation:{data:{},status:"rejected",error:t.error?t.error:"Something went wrong."}});default:return e}},Kt=Object(Bt.combineReducers)({hotels:Jt,cart:qt}),Zt=a(14),Qt=a.n(Zt),Xt=a(19),$t=a(32),ea=a(86),ta={API_URL:"https://5f6d939160cf97001641b049.mockapi.io/tkn"},aa=a.n(ea).a.create({baseURL:ta.API_URL}),sa={getHotels:function(){var e=Object($t.a)(Qt.a.mark((function e(){var t;return Qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa.get("/hotels");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getHotelsDetails:function(){var e=Object($t.a)(Qt.a.mark((function e(){var t;return Qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa.get("/hotel-details");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),checkCoupon:function(){var e=Object($t.a)(Qt.a.mark((function e(t){var a;return Qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa.get("/coupons?code=".concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),newReservation:function(){var e=Object($t.a)(Qt.a.mark((function e(t){var a;return Qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa.post("/hotel-bookings",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateReservation:function(){var e=Object($t.a)(Qt.a.mark((function e(t,a){var s;return Qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa.patch("/hotel-bookings/".concat(a),t,{withCredentials:!0});case 2:return s=e.sent,e.abrupt("return",s.data);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),deleteReservation:function(){var e=Object($t.a)(Qt.a.mark((function e(t){var a;return Qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aa.delete("/hotel-bookings/".concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},na=Qt.a.mark(ia);function ia(){var e,t;return Qt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return g.debug("[saga]","getHotelsSaga"),a.prev=1,a.next=4,sa.getHotels();case 4:return e=a.sent,a.next=7,sa.getHotelsDetails();case 7:return t=a.sent,a.next=10,Object(Xt.a)((n={names:e,details:t},g.debug("[actions]","setHotels",n),{type:F,data:n}));case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(1),a.next=16,Object(Xt.a)((s=a.t0,g.debug("[actions]","fetchHotelsFailed"),{type:P,error:s}));case 16:case"end":return a.stop()}var s,n}),na,null,[[1,12]])}var ra=Qt.a.mark(la),ca=Qt.a.mark(da),oa=Qt.a.mark(ua);function la(e){var t;return Qt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return g.debug("[saga]","checkCouponSaga",e),a.prev=1,a.next=4,sa.checkCoupon(e.couponCode);case 4:if((t=a.sent).length){a.next=7;break}throw new Error("Coupon code is not valid.");case 7:if(f.a.isAfter(t[0].expiration_at)){a.next=9;break}throw new Error("Coupon code is not valid.");case 9:return a.next=11,Object(Xt.a)(Ee(t[0]));case 11:a.next=17;break;case 13:return a.prev=13,a.t0=a.catch(1),a.next=17,Object(Xt.a)((s=a.t0.message,g.debug("[actions]","applyCouponFailed"),{type:ke,error:s}));case 17:case"end":return a.stop()}var s}),ra,null,[[1,13]])}function da(e){var t,a;return Qt.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(g.debug("[saga]","newReservationSaga",e),t=N("reservationId"),s.prev=2,t){s.next=9;break}return s.next=6,sa.newReservation(e.data);case 6:a=s.sent,s.next=12;break;case 9:return s.next=11,sa.updateReservation(e.data,t);case 11:a=s.sent;case 12:return s.next=14,Object(Xt.a)(He(a));case 14:s.next=20;break;case 16:return s.prev=16,s.t0=s.catch(2),s.next=20,Object(Xt.a)((n=s.t0.message,g.debug("[actions]","newReservationFailed"),{type:Te,error:n}));case 20:case"end":return s.stop()}var n}),ca,null,[[2,16]])}function ua(e){var t;return Qt.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return g.debug("[saga]","newReservationSaga",e),a.prev=1,a.next=4,sa.deleteReservation(e.reservationId);case 4:return t=a.sent,a.next=7,Object(Xt.a)(De(t));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(1),a.next=13,Object(Xt.a)((s=a.t0.message,g.debug("[actions]","deleteReservationFailed"),{type:Re,error:s}));case 13:case"end":return a.stop()}var s}),oa,null,[[1,9]])}var _a=Qt.a.mark(pa);function pa(){return Qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Xt.b)(D,ia);case 2:return e.next=4,Object(Xt.c)(ye,la);case 4:return e.next=6,Object(Xt.c)(Ne,da);case 6:return e.next=8,Object(Xt.c)(Se,ua);case 8:case"end":return e.stop()}}),_a)}var va=pa,ha=Object(zt.a)(),ma=[ha],ba=Object(Bt.createStore)(Kt,Object(Yt.composeWithDevTools)(Bt.applyMiddleware.apply(void 0,ma)));ha.run(va);var ja=ba;a(213),a(214);r.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(c.a,{store:ja,children:Object(p.jsx)(Lt,{})})}),document.getElementById("root")),Ut()},24:function(e,t,a){e.exports={"image-checkboxes":"ImageCheckbox_image-checkboxes__1dz3z","image-checkboxes__inner":"ImageCheckbox_image-checkboxes__inner__1SQNY","image-checkbox":"ImageCheckbox_image-checkbox__1fKcd","image-checkbox__field":"ImageCheckbox_image-checkbox__field__3dZIs","image-checkbox__label":"ImageCheckbox_image-checkbox__label__2WBo6","image-checkbox__label__title":"ImageCheckbox_image-checkbox__label__title__gWoQs","image-checkbox__label__img-wrapper":"ImageCheckbox_image-checkbox__label__img-wrapper__2Qnlj","image-checkbox__label__img":"ImageCheckbox_image-checkbox__label__img__3xALn","image-checkbox__label__meta":"ImageCheckbox_image-checkbox__label__meta__18grD"}},27:function(e,t,a){e.exports={button:"Button_button__2Lf63","button--primary":"Button_button--primary__3cK_U","button--inverse":"Button_button--inverse__1IjmI","button--none":"Button_button--none__2AjCZ","button--danger":"Button_button--danger__3ZwpZ","button--success":"Button_button--success__1vuGy","button--grey":"Button_button--grey__34GIV",button__spinner:"Button_button__spinner__e8awk","button--loading":"Button_button--loading__dRcSZ"}},29:function(e,t,a){e.exports={input:"TextField_input__1n0zB","input__inner-wrapper":"TextField_input__inner-wrapper__2YRGw",input__field:"TextField_input__field__2mFmc",invalid:"TextField_invalid__2PRZA"}},31:function(e,t,a){e.exports={finish:"Finish_finish__3mI0j",finish__content:"Finish_finish__content__204Zm","finish__img-wrapper":"Finish_finish__img-wrapper__2WL1s",finish__title:"Finish_finish__title__Pq2SP",finish__text:"Finish_finish__text__2WjvC",finish__actions:"Finish_finish__actions__3XImt"}},35:function(e,t,a){e.exports={"reservation-details__item":"ReservationDetailsItem_reservation-details__item__1O9Wf","reservation-details__item__title":"ReservationDetailsItem_reservation-details__item__title__csRFj","reservation-details__item__value":"ReservationDetailsItem_reservation-details__item__value__2EA07","reservation-details--boxes":"ReservationDetailsItem_reservation-details--boxes__3Vuqv"}},36:function(e,t,a){e.exports={header:"Header_header__1v0yI",header__logo:"Header_header__logo___qdaS",header__logo__title:"Header_header__logo__title__3-EnL",header__logo__slogan:"Header_header__logo__slogan__3sFAb",header__actions:"Header_header__actions__oD23-"}},37:function(e,t,a){e.exports={steps__item:"StepIndicator_steps__item__1eJwI","steps__item--active":"StepIndicator_steps__item--active__1wE6k","steps__img-wrapper":"StepIndicator_steps__img-wrapper__2uSDW",steps__img:"StepIndicator_steps__img__1ZYxp",steps__title:"StepIndicator_steps__title__YVYe_"}},38:function(e,t,a){e.exports={"preview-payment":"PreviewPayment_preview-payment__3agzY","preview-payment__card":"PreviewPayment_preview-payment__card__72thJ","preview-payment__form":"PreviewPayment_preview-payment__form__18_vA","credit-card-icon":"PreviewPayment_credit-card-icon__1azkY","preview-payment__details":"PreviewPayment_preview-payment__details__tOVFD"}},42:function(e,t,a){e.exports={"reservation-details__coupon":"ReservationCoupon_reservation-details__coupon__lyKDR","reservation-details__coupon__content":"ReservationCoupon_reservation-details__coupon__content__1bHJQ","reservation-details__coupon__success":"ReservationCoupon_reservation-details__coupon__success__3Eiqy","reservation-details__coupon__error":"ReservationCoupon_reservation-details__coupon__error__1ebly"}},49:function(e,t,a){e.exports={"reservation-details":"ReservationDetails_reservation-details__3PgYU","reservation-details__title":"ReservationDetails_reservation-details__title__3stcN","reservation-details__list":"ReservationDetails_reservation-details__list__28-dN"}},56:function(e,t,a){e.exports={"loader-abs":"CircularProgress_loader-abs__GUrwv",loader:"CircularProgress_loader__3EEwS",spin:"CircularProgress_spin__2K6a9"}},83:function(e,t,a){e.exports={portlet:"Portlet_portlet__3OoVI"}},84:function(e,t,a){e.exports={steps:"Steps_steps__2qV0H"}}},[[215,1,2]]]);
//# sourceMappingURL=main.91c25731.chunk.js.map